# 프로젝트 구조 가이드

## 전체 프로젝트 구조

Platform 프로젝트는 Frontend와 Backend로 구성된 풀스택 애플리케이션입니다.

```
platform/
├── gwFront/                 # Frontend (React)
│   ├── src/
│   ├── public/
│   └── package.json
├── backend/                 # Backend (Spring Boot)
│   ├── app-core/           # 메인 애플리케이션
│   ├── docker-compose/     # Docker 설정
│   ├── docs/              # 문서
│   └── CLAUDE.md          # AI 어시스턴트 가이드
└── backend2/               # 레거시 참조 프로젝트 (Maven)
```

## Backend 프로젝트 구조 (Monorepo)

### 루트 디렉토리 구조
```
backend/
├── app-core/               # 메인 애플리케이션 모듈
├── docker-compose/         # Docker 컨테이너 설정
│   └── db/
│       ├── docker-compose.yml
│       └── .env
├── docs/                   # 프로젝트 문서
│   ├── 개발환경_설정_가이드.md
│   ├── 백엔드_아키텍처_가이드.md
│   └── 프로젝트_구조_가이드.md
├── gradle/                 # Gradle Wrapper
│   └── wrapper/
├── build.gradle           # 루트 빌드 설정
├── settings.gradle        # 프로젝트 설정
├── gradle.properties      # Gradle 속성
├── gradlew               # Unix/Linux 실행 스크립트
├── gradlew.bat           # Windows 실행 스크립트
└── CLAUDE.md             # AI 어시스턴트 가이드
```

### app-core 모듈 구조
```
app-core/
├── src/
│   ├── main/
│   │   ├── java/
│   │   │   └── kr/co/platform/core/
│   │   │       ├── CoreApplication.java      # Spring Boot 메인 클래스
│   │   │       ├── common/                   # 공통 컴포넌트 (내장)
│   │   │       │   ├── config/              # 공통 설정
│   │   │       │   │   └── SpringDocConfig.java
│   │   │       │   ├── dto/                 # 공통 DTO
│   │   │       │   │   ├── BaseDto.java
│   │   │       │   │   └── CommonResponse.java
│   │   │       │   ├── entity/              # Base Entity
│   │   │       │   │   └── BaseEntity.java
│   │   │       │   ├── exception/           # 예외 처리
│   │   │       │   │   ├── BusinessException.java
│   │   │       │   │   ├── ErrorCode.java
│   │   │       │   │   └── GlobalExceptionHandler.java
│   │   │       │   ├── converter/           # 변환 유틸리티
│   │   │       │   │   └── GenericConverter.java
│   │   │       │   └── util/                # 유틸리티
│   │   │       │       ├── DateUtil.java
│   │   │       │       └── StringUtil.java
│   │   │       ├── config/                  # 애플리케이션 설정
│   │   │       │   ├── SecurityConfig.java
│   │   │       │   ├── SwaggerConfig.java
│   │   │       │   └── WebConfig.java
│   │   │       └── domain/                  # 비즈니스 도메인
│   │   │           └── schedule/           # 일정 관리 도메인
│   │   │               ├── mapper/         # MyBatis Mapper
│   │   │               │   ├── ScheduleMapper.java
│   │   │               │   └── ScheduleMapper.xml
│   │   │               ├── model/          # 도메인 모델
│   │   │               │   ├── dto/       # DTO
│   │   │               │   │   ├── ScheduleRequestDto.java
│   │   │               │   │   ├── ScheduleResponseDto.java
│   │   │               │   │   └── ScheduleSearchDto.java
│   │   │               │   ├── entity/    # Entity
│   │   │               │   │   └── ScheduleEntity.java
│   │   │               │   └── enums/     # Enum
│   │   │               │       └── ScheduleType.java
│   │   │               ├── service/        # 서비스 레이어
│   │   │               │   ├── ScheduleService.java
│   │   │               │   └── impl/
│   │   │               │       └── ScheduleServiceImpl.java
│   │   │               └── web/            # 컨트롤러
│   │   │                   └── ScheduleController.java
│   │   └── resources/
│   │       ├── application.yml            # 애플리케이션 설정
│   │       ├── logback-spring.xml        # 로깅 설정
│   │       └── db/
│   │           └── migration/            # Flyway 마이그레이션
│   │               └── V1__init.sql
│   └── test/
│       └── java/
│           └── kr/co/platform/core/
│               └── CoreApplicationTests.java
├── build/                                 # 빌드 출력 디렉토리
│   ├── classes/
│   ├── libs/
│   └── resources/
└── build.gradle                          # 모듈 빌드 설정
```

## 패키지 네이밍 규칙

### 기본 패키지 구조
```
kr.co.platform.core
│
├── common           # 공통 기능
├── config          # 설정
└── domain          # 비즈니스 도메인
    ├── user        # 사용자 관리
    ├── schedule    # 일정 관리
    ├── board       # 게시판
    ├── approval    # 전자결재
    └── newsfeed    # 뉴스피드
```

### 도메인 패키지 구조
```
domain.[도메인명]
├── mapper/         # 데이터 접근 계층
├── model/          # 모델 계층
│   ├── dto/       # Data Transfer Object
│   ├── entity/    # Database Entity
│   └── enums/     # Enumeration
├── service/        # 비즈니스 로직 계층
│   └── impl/      # 서비스 구현체
└── web/           # 프레젠테이션 계층
```

## 파일 네이밍 컨벤션

### Java 클래스
- **Controller**: `[Domain]Controller.java` (예: ScheduleController)
- **Service Interface**: `[Domain]Service.java` (예: ScheduleService)
- **Service Implementation**: `[Domain]ServiceImpl.java` (예: ScheduleServiceImpl)
- **Mapper**: `[Domain]Mapper.java` (예: ScheduleMapper)
- **Entity**: `[Domain]Entity.java` (예: ScheduleEntity)
- **Request DTO**: `[Domain]RequestDto.java` (예: ScheduleRequestDto)
- **Response DTO**: `[Domain]ResponseDto.java` (예: ScheduleResponseDto)
- **Search DTO**: `[Domain]SearchDto.java` (예: ScheduleSearchDto)

### 리소스 파일
- **MyBatis XML**: `[Domain]Mapper.xml` (예: ScheduleMapper.xml)
- **설정 파일**: `application.yml`, `application-{profile}.yml`
- **로깅 설정**: `logback-spring.xml`

## 설정 파일 구조

### application.yml
```yaml
spring:
  application:
    name: app-core
  datasource:
    url: jdbc:mariadb://localhost:3306/groupware
    username: root
    password: qwer1234

server:
  port: 8080
  servlet:
    context-path: /api/v1

mybatis:
  mapper-locations: classpath:kr/co/platform/**/*.xml
  type-aliases-package: kr.co.platform.core.**.entity

logging:
  level:
    kr.co.platform: DEBUG
```

### Docker Compose 환경변수 (.env)
```properties
MYSQL_ROOT_PASSWORD=qwer1234
MYSQL_DATABASE=groupware
MYSQL_USER=platform
MYSQL_PASSWORD=qwer1234
CORE_DB_PORT=3306
TZ=Asia/Seoul
```

## 빌드 결과물 구조

### JAR 파일 구조
```
app-core-0.0.1-SNAPSHOT.jar
├── BOOT-INF/
│   ├── classes/           # 컴파일된 클래스
│   ├── lib/              # 의존성 라이브러리
│   └── classpath.idx
├── META-INF/
│   ├── MANIFEST.MF
│   └── maven/
└── org/
    └── springframework/
        └── boot/
            └── loader/   # Spring Boot Loader
```

## 도메인 추가 가이드

새로운 도메인을 추가할 때 다음 구조를 따릅니다:

### 1. 패키지 생성
```
domain/
└── newdomain/
    ├── mapper/
    ├── model/
    │   ├── dto/
    │   ├── entity/
    │   └── enums/
    ├── service/
    │   └── impl/
    └── web/
```

### 2. 기본 클래스 생성
1. Entity 클래스 (BaseEntity 상속)
2. Mapper 인터페이스 및 XML
3. Service 인터페이스 및 구현체
4. Controller 클래스
5. Request/Response DTO

### 3. 설정 추가
- Swagger 그룹 추가 (SwaggerConfig)
- 필요시 보안 설정 추가 (SecurityConfig)

## Git 브랜치 전략

### 브랜치 구조
```
main                    # 프로덕션 배포
├── develop            # 개발 통합
│   ├── feature/xxx   # 기능 개발
│   └── feature/yyy
├── hotfix/xxx        # 긴급 수정
└── release/v1.0.0    # 릴리즈 준비
```

### 커밋 메시지 규칙
```
[타입] 제목

본문 (선택사항)

타입:
- feat: 새로운 기능
- fix: 버그 수정
- docs: 문서 수정
- style: 코드 포맷팅
- refactor: 리팩토링
- test: 테스트 추가
- chore: 빌드, 설정 수정
```

## 보안 및 권한 구조

### 현재 상태
- Spring Security 설정 (임시 비활성화)
- 모든 엔드포인트 접근 허용

### 목표 구조
```
/api/v1/public/**    # 인증 불필요
/api/v1/auth/**      # 인증 관련
/api/v1/**           # JWT 토큰 필요
/api/v1/admin/**     # ADMIN 권한 필요
```

## 참고사항

1. **패키지 구조 유지**: 도메인별 독립성 보장
2. **네이밍 일관성**: 약어 사용 금지, 명확한 이름 사용
3. **레이어 분리**: Web → Service → Mapper 의존성 방향 준수
4. **공통 기능 활용**: BaseEntity, CommonResponse 등 재사용
5. **문서화**: JavaDoc 주석 필수 작성